"use strict";(self["webpackChunkmanhua"]=self["webpackChunkmanhua"]||[]).push([[387],{6387:function(t,s,e){e.r(s),e.d(s,{default:function(){return o}});var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"classify"},[e("div",{staticClass:"classify-top"},t._l(t.classifys,(function(s,a){return e("div",{key:a,staticClass:"classify-top-list",class:s.type},[e("div",{staticClass:"classify-top-list-item a1"},[t._v(" "+t._s(0===a?"题材":"")+t._s(1===a?"地区":"")+t._s(2===a?"进度":"")+t._s(3===a?"排序":"")+t._s(4===a?"收费":"")+" ")]),t._l(s.list,(function(a,r){return e("div",{key:r,staticClass:"classify-top-list-item",class:{active:0===r},on:{click:function(e){return t.activeCondition(s.type,a.id,"",e)}}},[t._v(" "+t._s(a.name)+" ")])}))],2)})),0),e("div",{staticClass:"classify-result"},[e("comicList",{attrs:{list:t.classifyResult},on:{"update:list":function(s){t.classifyResult=s}}})],1),e("div",{staticClass:"empty"},[0==t.classifyResult.length?e("el-empty",{attrs:{description:"暂无数据"}}):t._e()],1),e("pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total > 0"}],attrs:{align:"center",total:t.total,page:t.queryParams.pageNum,limit:t.queryParams.pageSize},on:{"update:page":function(s){return t.$set(t.queryParams,"pageNum",s)},"update:limit":function(s){return t.$set(t.queryParams,"pageSize",s)},pagination:t.getClassPage}})],1)},r=[],i=e(7840),n={name:"classify",data(){return{classifys:[],xuan:[],classifyResult:[],pageSize:39,total:100,classifyslist:[],queryParams:{styleId:"",areaId:"",isFinish:"",order:"",isFree:"",pageNum:1,pageSize:10},classID:this.$store.state.classID?this.$store.state.classID:-1}},watch:{getclassID(t,s){t!=s&&(this.queryParams.styleId=t,this.activeCondition("styles",this.queryParams.styleId))}},computed:{getclassID(){return this.$store.state.classID}},created(){},async mounted(){this.getClassPage();let t=await this.getClassify();this.queryParams.styleId=this.classID,-1!=this.queryParams.styleId&&this.activeCondition("styles",this.queryParams.styleId,t)},methods:{getClassify(){return new Promise(((t,s)=>{(0,i.K)().then((s=>{let e={id:-1,name:"全部"},a=s.data,r=0;for(const t in a)"orders"!=t&&a[t].unshift(e),this.classifys.push({classifysId:r++,type:t,list:a[t]});this.classifys.forEach((t=>{"orders"==t.type&&(t.classifysId=4),"prices"==t.type&&(t.classifysId=3)})),t(this.classifys)}))}))},activeCondition(t,s,e,a){let r=document.querySelectorAll(`.${t}>.classify-top-list-item`);r.forEach((t=>{t.classList.remove("active")})),a&&a.srcElement.classList.add("active"),e&&e[0].list.forEach(((e,a)=>{if(e.id==s)return r[a+1].classList.add("active"),this.xuan[t]=s})),this.classifys[0]&&this.classifys[0].list.forEach(((e,a)=>{if(e.id==s)return r[a+1].classList.add("active"),this.xuan[t]=s})),t&&(this.xuan[`${t}`]=s,this.queryParams.styleId=this.xuan.styles,this.queryParams.areaId=this.xuan.areas,this.queryParams.isFinish=this.xuan.status,this.queryParams.isFree=this.xuan.prices,this.queryParams.order=this.xuan.orders,this.getClassPage(this.xuan.styles,this.xuan.areas,this.xuan.status,this.xuan.prices,this.xuan.orders))},getClassPage(t,s,e,a,r){this.classifyResult=[],(0,i.tC)(this.queryParams).then((t=>{this.classifyResult=t.data}))},getId(t){this.$router.push({name:"cartoondetail",params:{comicId:t}})},jiazai(){this.pageSize+=37,this.getClassPage(this.xuan.styles,this.xuan.areas,this.xuan.status,this.xuan.prices,this.xuan.orders)}}},u=n,l=e(1001),c=(0,l.Z)(u,a,r,!1,null,"34c71d4a",null),o=c.exports},7840:function(t,s,e){e.d(s,{tC:function(){return y},m6:function(){return f},Eg:function(){return o},K:function(){return m},zG:function(){return p},T4:function(){return d},R9:function(){return h},Ve:function(){return v},wN:function(){return I},JV:function(){return P},qV:function(){return g},fh:function(){return C}});e(1703);var a=e(6166),r=e.n(a),i=e(4549),n={401:"认证失败，无法访问系统资源",403:"当前操作没有权限",404:"访问资源不存在",default:"系统未知错误，请反馈给管理员"},u=e(4406);r().defaults.headers["Content-Type"]="application/json;charset=utf-8";const l=r().create({baseURL:"/apis",timeout:1e4});l.interceptors.request.use((t=>{(t.headers||{}).repeatSubmit;if("get"===t.method&&t.params){let s=t.url+"?"+(0,u.jC)(t.params);s=s.slice(0,-1),t.params={},t.url=s}return t}),(t=>{Promise.reject(t)})),l.interceptors.response.use((t=>{const s=t.data.code||200,e=n[s]||t.data.msg||n["default"];return"blob"===t.request.responseType||"arraybuffer"===t.request.responseType?t.data:500===s?((0,i.Message)({message:e,type:"error"}),Promise.reject(new Error(e))):200!==s?(i.Notification.error({title:e}),Promise.reject("error")):t.data}),(t=>{console.log("err"+t);let{message:s}=t;return"Network Error"==s?s="后端接口连接异常":s.includes("timeout")?s="系统接口请求超时":s.includes("Request failed with status code")&&(s="系统接口"+s.substr(s.length-3)+"异常"),(0,i.Message)({message:s,type:"error",duration:5e3}),Promise.reject(t)}));var c=l;function o(t){return c({url:"/Banner",method:"get",params:t})}function m(t){return c({url:"/AllLabel",method:"get",params:t})}function d(t){return c({url:"/HomeRecommend",method:"get",params:t})}function h(t){return c({url:"/GetClassPageSixComics",method:"get",params:t})}function f(t){return c({url:"/Search",method:"get",params:t})}function y(t){return c({url:"/ClassPage",method:"get",params:t})}function p(t){return c({url:"/ComicDetail",method:"get",params:t})}function g(t){return c({url:"/MoreRecommend",method:"get",params:t})}function C(t){return c({url:"/ReplyMain",method:"get",params:t})}function P(t){return c({url:"/GetRankInfo",method:"get",params:t})}function v(t){return c({url:"/GetImageIndex",method:"get",params:t})}function I(t){return c({url:"/ImageToken",method:"get",params:t})}}}]);
//# sourceMappingURL=387.eca067c7.js.map