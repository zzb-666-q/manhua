"use strict";(self["webpackChunkmanhua"]=self["webpackChunkmanhua"]||[]).push([[8],{8008:function(t,e,s){s.r(e),s.d(e,{default:function(){return m}});var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"cartoondetail"},[s("div",{staticClass:"cartoondetail-content"},[s("div",{staticClass:"cartoondetail-detail"},[s("div",{staticClass:"detail-lt"},[s("div",{staticClass:"lt-img"},[s("img",{attrs:{src:t.details.vertical_cover,alt:""}})])]),s("div",{staticClass:"detail-rt"},[s("div",{staticClass:"rt-title"},[s("h1",[t._v(t._s(t.details.title))])]),s("div",{staticClass:"rt-author"},[t._v(t._s(t.author))]),t.styles?s("div",{staticClass:"rt-style"},[s("i",{staticClass:"el-icon-price-tag"}),t._v(" "+t._s(t.styles)+" ")]):t._e(),t.details.total?s("div",{staticClass:"rt-total"},[s("i",{staticClass:"el-icon-notebook-1"}),t._v(" 更新至 "+t._s(t.details.total)+" 话 ")]):t._e(),s("div",{staticClass:"rt-time"},[s("i",{staticClass:"el-icon-date"}),t._v(" "+t._s(t.details.renewal_time)+" ")]),s("div",{staticClass:"rt-synopsis"},[t._v(t._s(t.details.evaluate))]),s("div",{staticClass:"rt-button"},[s("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.getId(t.comicId,t.chapterlist[0][0].id,t.chapterlist[0][0].short_title,t.chapterlist[0][0].title)}}},[t._v("开始阅读 第一话")]),s("div",{staticClass:"btn",on:{click:t.getCollection}},[s("i",{staticClass:"el-icon-star-off",class:t.collection?"el-icon-star-on":"el-icon-star-off"}),t._v(" 追漫 ")])],1)])])]),s("div",{staticClass:"cartoondetail-chapter"},[s("div",{staticClass:"chapterlist"},[s("div",{staticClass:"chapterlist-lt"},[s("div",{staticClass:"chapter1"},[s("h2",[t._v("章节列表")]),s("div",{staticClass:"chapter-btnlist"},t._l(t.chapterNum,(function(e,i){return s("div",{key:i,staticClass:"chapter-btn"},[s("div",{staticClass:"btn",class:t.activeBtn===i?"active":"btn",on:{click:function(e){return t.active(i)}}},[t._v(" "+t._s(e.start)+"-"+t._s(e.end)+" ")])])})),0),s("div",{staticClass:"chapter-list"},t._l(t.chapterlist[t.activeBtn],(function(e,i){return s("div",{key:i,staticClass:"chapter-list-item"},[s("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.short_title+" "+e.title,placement:"top-start"}},[s("div",{staticClass:"chapter-list-item-text",on:{click:function(s){return t.getId(t.comicId,e.id,e.short_title,e.title)}}},[t._v(" "+t._s(e.short_title)+"  "+t._s(e.title)+" ")])]),e.is_locked?s("div",{staticClass:"chapter-list-item-lock"},[s("i",{staticClass:"el-icon-lock"})]):t._e()],1)})),0)]),s("div",{staticClass:"chapterlist-comment"},[s("h2",[t._v("评论")]),s("div",{staticClass:"comment-top"},[t._m(0),s("div",{staticClass:"comment-top-cnt"},[s("div",[t._v(" 请先 "),s("el-button",{attrs:{type:"primary"}},[t._v("登录")]),t._v("  后发表评论 (・ω・) ")],1)]),s("div",{staticClass:"comment-top-rt"},[t._v("发表评论")])]),s("div",{staticClass:"comment-cnt"},[s("div",{staticClass:"comment-cnt-list"},t._l(t.comment,(function(e,i){return s("div",{key:i,staticClass:"comment-cnt-list-item"},[s("div",{staticClass:"item-lt"},[s("img",{attrs:{src:e.member.avatar,alt:""}})]),s("div",{staticClass:"item-rt"},[s("div",{staticClass:"username"},[t._v(t._s(e.member.uname))]),s("div",{staticClass:"text"},[t._v(t._s(e.content.message))]),s("div",{staticClass:"time"},[t._v(t._s(t.parseTime(e.ctime)))])])])})),0)]),s("div",{staticClass:"btn"},[s("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:1e3},on:{"current-change":t.handleCurrentChange}})],1)])]),s("div",{staticClass:"chapterlist-rt"},[s("div",{staticClass:"rt-top"},[t._m(1),s("div",[s("el-button",{attrs:{type:"primary",round:"",plain:""},on:{click:t.goClassify}},[t._v("更多"),s("i",{staticClass:"el-icon-arrow-right"})])],1)]),s("div",{staticClass:"rt-list"},t._l(t.recomm,(function(e,i){return i<5?s("div",{key:i,staticClass:"rt-list-item"},[s("div",{staticClass:"item-img",on:{click:function(s){return t.changeId(e.id)}}},[s("img",{attrs:{src:e.vertical_cover,alt:""}})]),s("div",{staticClass:"item-text"},[s("div",{staticClass:"title"},[t._v(t._s(e.title))]),s("div",{staticClass:"titl"},[t._v("更新至第 "+t._s(e.total)+" 话")])])]):t._e()})),0)])])])])},a=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"comment-top-lt"},[s("img",{attrs:{src:"https://static.hdslb.com/images/member/noface.gif",alt:""}})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("h2",[t._v("更多推荐")])])}],c=s(7840),r={name:"cartoondetail",data(){return{collection:!1,details:[],author:"",styles:"",chapterNum:[],chapterlist:[],activeBtn:0,recomm:[],next:1,comment:[]}},created(){this.comicId=this.$route.params.comicId;let t=JSON.parse(localStorage.getItem("comicIds"));this.comicId?this.localStorage(this.comicId):this.comicId=t.comicId,this.getCartoonDetail(this.comicId),this.getRecomm(this.comicId),this.getComment(this.next)},mounted(){console.log("mounted"),console.log("output->window",window),window.scrollY=0},destroyed(){console.log("destroyed")},methods:{getCartoonDetail(t){let e={comicId:t};(0,c.zG)(e).then((t=>{this.details=t.data,this.author=t.data.author_name[0],this.styles=t.data.styles[0];let e=t.data.ep_list.reverse();this.listlength=e.length;for(let s=0;s<e.length;s+=50)this.chapterNum.push({start:s+1,end:s+50}),this.chapterlist.push(e.slice(s,s+50))})).catch((t=>{}))},getCollection(){this.collection=!this.collection,this.collection&&this.$message({showClose:!0,message:"已成功添加进追漫！",type:"success"})},active(t){this.activeBtn=t},getRecomm(t){let e={comicId:t};(0,c.qV)(e).then((t=>{this.recomm=t.data.recommend_comics,console.log("this.recomm",this.recomm)})).catch((t=>{console.log("err==>",t)}))},changeId(t){this.details=[],this.chapterlist=[],this.recomm=[],this.chapterNum=[],this.comicId=t,this.getCartoonDetail(t),this.getRecomm(t),this.localStorage(t),window.scrollTo(0,0)},getId(t,e,s,i){console.log("comicId ==> ",t),this.$router.push({name:"comiccontent",params:{epId:e,comicId:t}}),localStorage.setItem("comicIds",JSON.stringify({comicId:t,epId:e,short_title:s,title:i}))},getComment(t){let e={oid:this.comicId,ps:10,next:t};(0,c.fh)(e).then((t=>{this.comment=t.data.replies})).catch((t=>{console.log("err==>",t)}))},localStorage(t){localStorage.setItem("comicIds",JSON.stringify({comicId:t}))},goClassify(){this.$router.push({name:"classify"}),setTimeout((()=>{this.$router.go(0)}),1e3)},handleCurrentChange(t){console.log(`当前页: ${t}`),this.next=t,this.comment=[],this.getComment(this.next)}}},o=r,n=s(1001),l=(0,n.Z)(o,i,a,!1,null,"83e44abe",null),m=l.exports},7840:function(t,e,s){s.d(e,{tC:function(){return p},m6:function(){return v},Eg:function(){return m},K:function(){return d},zG:function(){return g},T4:function(){return u},R9:function(){return h},Ve:function(){return I},wN:function(){return y},JV:function(){return _},qV:function(){return C},fh:function(){return f}});s(1703);var i=s(6166),a=s.n(i),c=s(4549),r={401:"认证失败，无法访问系统资源",403:"当前操作没有权限",404:"访问资源不存在",default:"系统未知错误，请反馈给管理员"},o=s(4406);a().defaults.headers["Content-Type"]="application/json;charset=utf-8";const n=a().create({baseURL:"/apis",timeout:1e4});n.interceptors.request.use((t=>{(t.headers||{}).repeatSubmit;if("get"===t.method&&t.params){let e=t.url+"?"+(0,o.jC)(t.params);e=e.slice(0,-1),t.params={},t.url=e}return t}),(t=>{Promise.reject(t)})),n.interceptors.response.use((t=>{const e=t.data.code||200,s=r[e]||t.data.msg||r["default"];return"blob"===t.request.responseType||"arraybuffer"===t.request.responseType?t.data:500===e?((0,c.Message)({message:s,type:"error"}),Promise.reject(new Error(s))):200!==e?(c.Notification.error({title:s}),Promise.reject("error")):t.data}),(t=>{console.log("err"+t);let{message:e}=t;return"Network Error"==e?e="后端接口连接异常":e.includes("timeout")?e="系统接口请求超时":e.includes("Request failed with status code")&&(e="系统接口"+e.substr(e.length-3)+"异常"),(0,c.Message)({message:e,type:"error",duration:5e3}),Promise.reject(t)}));var l=n;function m(t){return l({url:"/Banner",method:"get",params:t})}function d(t){return l({url:"/AllLabel",method:"get",params:t})}function u(t){return l({url:"/HomeRecommend",method:"get",params:t})}function h(t){return l({url:"/GetClassPageSixComics",method:"get",params:t})}function v(t){return l({url:"/Search",method:"get",params:t})}function p(t){return l({url:"/ClassPage",method:"get",params:t})}function g(t){return l({url:"/ComicDetail",method:"get",params:t})}function C(t){return l({url:"/MoreRecommend",method:"get",params:t})}function f(t){return l({url:"/ReplyMain",method:"get",params:t})}function _(t){return l({url:"/GetRankInfo",method:"get",params:t})}function I(t){return l({url:"/GetImageIndex",method:"get",params:t})}function y(t){return l({url:"/ImageToken",method:"get",params:t})}}}]);
//# sourceMappingURL=8.b8e08245.js.map