"use strict";(self["webpackChunkmanhua"]=self["webpackChunkmanhua"]||[]).push([[16],{1016:function(t,s,i){i.r(s),i.d(s,{default:function(){return n}});var e=function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"cartoondetail"},[i("div",{staticClass:"cartoondetail-content"},[i("div",{staticClass:"cartoondetail-detail"},[i("div",{staticClass:"detail-lt"},[i("div",{staticClass:"lt-img"},[i("img",{attrs:{src:t.details.vertical_cover,alt:""}})])]),i("div",{staticClass:"detail-rt"},[i("div",{staticClass:"rt-title"},[i("h1",[t._v(t._s(t.details.title))])]),i("div",{staticClass:"rt-author"},[t._v(t._s(t.author))]),t.styles?i("div",{staticClass:"rt-style"},[i("i",{staticClass:"el-icon-price-tag"}),t._v(" "+t._s(t.styles)+" ")]):t._e(),t.details.total?i("div",{staticClass:"rt-total"},[i("i",{staticClass:"el-icon-notebook-1"}),t._v(" 更新至 "+t._s(t.details.total)+" 话 ")]):t._e(),i("div",{staticClass:"rt-time"},[i("i",{staticClass:"el-icon-date"}),t._v(" "+t._s(t.details.renewal_time)+" ")]),i("div",{staticClass:"rt-synopsis"},[t._v(t._s(t.details.evaluate))]),i("div",{staticClass:"rt-button"},[i("el-button",{attrs:{type:"primary"},on:{click:function(s){return t.getId(t.comicId,t.chapterlist[0][0].id,t.chapterlist[0][0].short_title,t.chapterlist[0][0].title)}}},[t._v("开始阅读 第一话")]),i("div",{staticClass:"btn",on:{click:t.getCollection}},[i("i",{staticClass:"el-icon-star-off",class:t.collection?"el-icon-star-on":"el-icon-star-off"}),t._v(" 追漫 ")])],1)])])]),i("div",{staticClass:"cartoondetail-chapter"},[i("div",{staticClass:"chapterlist"},[i("div",{staticClass:"chapterlist-lt"},[i("div",{staticClass:"chapter1"},[i("h2",[t._v("章节列表")]),i("div",{staticClass:"chapter-btnlist"},t._l(t.chapterNum,(function(s,e){return i("div",{key:e,staticClass:"chapter-btn"},[i("div",{staticClass:"btn",class:t.activeBtn===e?"active":"btn",on:{click:function(s){return t.active(e)}}},[t._v(" "+t._s(s.start)+"-"+t._s(s.end)+" ")])])})),0),i("div",{staticClass:"chapter-list"},t._l(t.chapterlist[t.activeBtn],(function(s,e){return i("div",{key:e,staticClass:"chapter-list-item"},[i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:s.short_title+" "+s.title,placement:"top-start"}},[i("div",{staticClass:"chapter-list-item-text",on:{click:function(i){return t.getId(t.comicId,s.id,s.short_title,s.title)}}},[t._v(" "+t._s(s.short_title)+"  "+t._s(s.title)+" ")])]),s.is_locked?i("div",{staticClass:"chapter-list-item-lock"},[i("i",{staticClass:"el-icon-lock"})]):t._e()],1)})),0)]),i("div",{staticClass:"chapterlist-comment"},[i("h2",[t._v("评论")]),i("div",{staticClass:"comment-top"},[t._m(0),i("div",{staticClass:"comment-top-cnt"},[i("div",[t._v(" 请先 "),i("el-button",{attrs:{type:"primary"}},[t._v("登录")]),t._v("  后发表评论 (・ω・) ")],1)]),i("div",{staticClass:"comment-top-rt"},[t._v("发表评论")])]),i("div",{staticClass:"comment-cnt"},[i("div",{staticClass:"comment-cnt-list"},t._l(t.comment,(function(s,e){return i("div",{key:e,staticClass:"comment-cnt-list-item"},[i("div",{staticClass:"item-lt"},[i("img",{attrs:{src:s.member.avatar,alt:""}})]),i("div",{staticClass:"item-rt"},[i("div",{staticClass:"username"},[t._v(t._s(s.member.uname))]),i("div",{staticClass:"text"},[t._v(t._s(s.content.message))]),i("div",{staticClass:"time"},[t._v(t._s(t.parseTime(s.ctime)))])])])})),0)]),i("div",{staticClass:"btn"},[i("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:1e3},on:{"current-change":t.handleCurrentChange}})],1)])]),i("div",{staticClass:"chapterlist-rt"},[i("div",{staticClass:"rt-top"},[t._m(1),i("div",[i("el-button",{attrs:{type:"primary",round:"",plain:""},on:{click:t.goClassify}},[t._v("更多"),i("i",{staticClass:"el-icon-arrow-right"})])],1)]),i("div",{staticClass:"rt-list"},t._l(t.recomm,(function(s,e){return e<5?i("div",{key:e,staticClass:"rt-list-item"},[i("div",{staticClass:"item-img",on:{click:function(i){return t.changeId(s.id)}}},[i("img",{attrs:{src:s.vertical_cover,alt:""}})]),i("div",{staticClass:"item-text"},[i("div",{staticClass:"title"},[t._v(t._s(s.title))]),i("div",{staticClass:"titl"},[t._v("更新至第 "+t._s(s.total)+" 话")])])]):t._e()})),0)])])])])},a=[function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"comment-top-lt"},[i("img",{attrs:{src:"https://static.hdslb.com/images/member/noface.gif",alt:""}})])},function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",[i("h2",[t._v("更多推荐")])])}],c={name:"cartoondetail",data(){return{collection:!1,details:[],author:"",styles:"",chapterNum:[],chapterlist:[],activeBtn:0,recomm:[],next:1,comment:[]}},created(){this.comicId=this.$route.params.comicId;let t=JSON.parse(localStorage.getItem("comicIds"));this.comicId?this.localStorage(this.comicId):this.comicId=t.comicId,this.getCartoonDetail(this.comicId),this.getRecomm(this.comicId),this.getComment(this.next)},mounted(){console.log("mounted"),console.log("output->window",window),window.scrollY=0},destroyed(){console.log("destroyed")},methods:{getCartoonDetail(t){this.axios({method:"get",url:"https://apis.netstart.cn/bcomic/ComicDetail",params:{comicId:t}}).then((t=>{this.details=t.data.data,this.author=t.data.data.author_name[0],this.styles=t.data.data.styles[0];let s=t.data.data.ep_list.reverse();this.listlength=s.length;for(let i=0;i<s.length;i+=50)this.chapterNum.push({start:i+1,end:i+50}),this.chapterlist.push(s.slice(i,i+50))})).catch((t=>{}))},getCollection(){this.collection=!this.collection,this.collection&&this.$message({showClose:!0,message:"已成功添加进追漫！",type:"success"})},active(t){this.activeBtn=t},getRecomm(t){this.axios({method:"get",url:"https://apis.netstart.cn/bcomic/MoreRecommend",params:{comicId:t}}).then((t=>{this.recomm=t.data.data.recommend_comics,console.log("this.recomm",this.recomm)})).catch((t=>{console.log("err==>",t)}))},changeId(t){this.details=[],this.chapterlist=[],this.recomm=[],this.chapterNum=[],this.comicId=t,this.getCartoonDetail(t),this.getRecomm(t),this.localStorage(t),window.scrollTo(0,0)},getId(t,s,i,e){console.log("comicId ==> ",t),this.$router.push({name:"comiccontent",params:{epId:s,comicId:t}}),localStorage.setItem("comicIds",JSON.stringify({comicId:t,epId:s,short_title:i,title:e}))},getComment(t){this.axios({method:"get",url:"https://apis.netstart.cn/bcomic/ReplyMain",params:{oid:this.comicId,ps:10,next:t}}).then((t=>{console.log("result.data.data.replies==>",t.data.data.replies),this.comment=t.data.data.replies})).catch((t=>{console.log("err==>",t)}))},localStorage(t){localStorage.setItem("comicIds",JSON.stringify({comicId:t}))},goClassify(){this.$router.push({name:"classify"}),setTimeout((()=>{this.$router.go(0)}),1e3)},handleCurrentChange(t){console.log(`当前页: ${t}`),this.next=t,this.comment=[],this.getComment(this.next)}}},l=c,o=i(1001),r=(0,o.Z)(l,e,a,!1,null,"02853146",null),n=r.exports}}]);
//# sourceMappingURL=16.718f61ba.js.map